Metadata-Version: 2.4
Name: wikiscrapper
Version: 0.2.0
Summary: A professional CLI tool to scrape documentation sites for LLM context.
Author-email: liyankova <liyannkova@gmail.com>
License: MIT
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: requests
Requires-Dist: beautifulsoup4
Requires-Dist: typer[all]
Requires-Dist: markdownify
Requires-Dist: rich
Requires-Dist: playwright
Requires-Dist: lxml

# WikiScrapper

WikiScrapper is a CLI tool to scrape documentation and wiki pages and convert them into clean .txt or .md files suitable for LLM context.

This refactor focuses on:
- Respecting robots.txt
- Robust network behavior (retries, timeouts)
- URL normalization & deduplication
- Safe file path generation
- Cleaner Markdown/Text output with YAML frontmatter
- Checkpointing for resume
- Optional JS-render mode using Playwright (opt-in)

## Installation

Requires Python 3.8+.

1. Clone repo:
```bash
git clone https://github.com/liyankova/wikiscrapper.git
cd wikiscrapper
```

2. Install in editable mode:
```bash
python -m venv venv
source venv/bin/activate
pip install -e .
```

3. (Optional) If you plan to use JS-render mode, install Playwright browsers:
```bash
# install Python package (already in dependencies if using pyproject)
pip install playwright

# install browser binaries (required)
playwright install
```

## Usage

Main command:
```bash
wikiscrapper scrape START_URL [OPTIONS]
```

Example (no JS-render):
```bash
wikiscrapper scrape https://docs.example.com/getting-started \
  --output my_docs \
  --depth 2 \
  --selector "article.doc-content" \
  --format md \
  --delay 1.0 \
  --same-host \
  --max-pages 100
```

Example (enable JS-render mode â€” may be slower and requires Playwright + browsers):
```bash
wikiscrapper scrape https://example-js-site.dev \
  --selector "article" \
  --format md \
  --js-render
```

Options of note:
- --selector: CSS selector for main content (important for clean extraction)
- --same-host / --allow-external: restrict to same host by default
- --max-pages: stop after X pages (0 = unlimited)
- --checkpoint: path to checkpoint JSON for resume
- --js-render: optional Playwright-based renderer to handle JS-heavy pages

## Local testing

Basic tests are included under `tests/`. To run tests:

1. Install test deps (pytest is not required as dependency, install separately if needed):
```bash
pip install pytest
```

2. If you want to run JS-render tests, ensure Playwright and browsers are installed:
```bash
pip install playwright
playwright install
```

3. Run tests:
```bash
pytest -q
```

Note: JS rendering tests will be automatically skipped if Playwright or browser binaries are not available.

## Notes & Limitations
- This tool targets static documentation pages by default. JS-heavy SPA sites may require `--js-render`.
- Playwright increases dependencies and resource usage; use only when necessary.
- Respect site Terms-of-Service and robots.txt rules.

MIT License
